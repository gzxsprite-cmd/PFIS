<div class="fixed inset-0 z-50 flex items-center justify-center p-4">
  <div class="absolute inset-0 bg-gray-900/70 backdrop-blur-sm" data-modal-dismiss="true"></div>
  <div class="relative w-full max-w-lg rounded-2xl bg-white p-8 shadow-2xl space-y-6">
    <div class="flex items-center justify-between">
      <h3 class="text-lg font-semibold text-gray-800">{{ title }}</h3>
      <button
        type="button"
        class="rounded-full bg-gray-100 px-3 py-1 text-sm text-gray-500 transition hover:bg-gray-200"
        data-modal-dismiss="true"
      >
        关闭
      </button>
    </div>
    <form
      hx-post="{{ form_action }}"
      hx-target="{{ hx_target }}"
      hx-swap="{{ hx_swap | default('outerHTML') }}"
      {% if hx_include %}hx-include="{{ hx_include }}"{% endif %}
      class="space-y-6 text-sm"
      _="on htmx:afterRequest call window.PFIS.closeModal()"
    >
      {% if method and method|lower != 'post' %}
      <input type="hidden" name="_method" value="{{ method }}" />
      {% endif %}
      {% include form_template %}
      <div class="flex justify-end gap-3 pt-4">
        <button
          type="button"
          class="rounded-lg bg-gray-100 px-4 py-2 font-medium text-gray-700 transition hover:bg-gray-200"
          data-modal-dismiss="true"
        >
          取消
        </button>
        <button
          type="submit"
          class="rounded-lg bg-blue-600 px-5 py-2 font-medium text-white transition hover:bg-blue-700"
        >
          {{ submit_label | default('保存修改') }}
        </button>
      </div>
    </form>
  </div>
</div>
