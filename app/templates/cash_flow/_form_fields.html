{% set current = item if item is defined else None %}
<div class="grid grid-cols-1 gap-6 md:grid-cols-2">
  <div>
    <label class="mb-1 block text-sm font-medium text-gray-700">日期</label>
    <input
      type="date"
      name="date_value"
      class="w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100"
      value="{{ current.date.isoformat() if current and current.date else '' }}"
      required
    />
  </div>
  <div>
    <label class="mb-1 block text-sm font-medium text-gray-700">账户</label>
    <select
      name="account_id"
      class="w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100"
      required
    >
      {% for account in master_data.accounts %}
      <option value="{{ account.id }}" {% if current and current.account_id == account.id %}selected{% endif %}>{{ account.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div>
    <label class="mb-1 block text-sm font-medium text-gray-700">类别</label>
    <select
      name="category_id"
      class="w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100"
    >
      <option value="">---</option>
      {% for category in master_data.categories %}
      <option value="{{ category.id }}" {% if current and current.category_id == category.id %}selected{% endif %}>{{ category.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div>
    <label class="mb-1 block text-sm font-medium text-gray-700">收支类型</label>
    <select
      name="flow_type"
      class="w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100"
      required
    >
      <option value="收入" {% if current and current.flow_type == '收入' %}selected{% endif %}>收入</option>
      <option value="支出" {% if current and current.flow_type == '支出' %}selected{% endif %}>支出</option>
    </select>
  </div>
</div>
<div class="grid grid-cols-1 gap-6 md:grid-cols-2">
  <div>
    <label class="mb-1 block text-sm font-medium text-gray-700">金额</label>
    <input
      type="number"
      step="0.01"
      name="amount"
      class="w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100"
      value="{{ '%.2f'|format(current.amount) if current else '' }}"
      required
    />
  </div>
  <div>
    <label class="mb-1 block text-sm font-medium text-gray-700">来源类型</label>
    <select
      name="source_type_id"
      class="w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100"
    >
      <option value="">---</option>
      {% for source in master_data.source_types %}
      <option value="{{ source.id }}" {% if current and current.source_type_id == source.id %}selected{% endif %}>{{ source.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="md:col-span-2">
    <label class="mb-1 block text-sm font-medium text-gray-700">备注</label>
    <input
      type="text"
      name="remark"
      class="w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100"
      value="{{ current.remark if current and current.remark else '' }}"
      placeholder="可选"
    />
  </div>
</div>
