{% extends "base.html" %}
{% block title %}产品追踪{% endblock %}
{% block content %}
<section class="bg-white shadow rounded p-6">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-lg font-semibold">理财产品</h2>
    <details class="text-sm">
      <summary class="px-3 py-1 rounded bg-indigo-600 text-white cursor-pointer">新增产品</summary>
      <form
        class="mt-3 grid md:grid-cols-3 gap-3"
        hx-post="/products/add"
        hx-target="#product-table"
        hx-swap="outerHTML"
      >
        <input type="text" name="product_name" class="input" placeholder="产品名称" required />
        <select name="type_id" class="input">
          <option value="">产品类型</option>
          {% for item in master_data.product_types %}
          <option value="{{ item.id }}">{{ item.name }}</option>
          {% endfor %}
        </select>
        <select name="risk_level_id" class="input">
          <option value="">风险等级</option>
          {% for item in master_data.risk_levels %}
          <option value="{{ item.id }}">{{ item.name }}</option>
          {% endfor %}
        </select>
        <input type="date" name="launch_date" class="input" />
        <input type="text" name="remark" class="input" placeholder="备注" />
        <div class="md:col-span-3 flex justify-end">
          <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded">保存</button>
        </div>
      </form>
    </details>
  </div>
  <div class="grid md:grid-cols-2 gap-6">
    <div id="product-table" class="overflow-x-auto">
      {% include "product_tracker/table.html" %}
    </div>
    <div id="product-detail" class="border border-dashed border-slate-300 rounded p-4 text-sm text-slate-500">
      选择一个产品查看详细指标与图表。
    </div>
  </div>
</section>
{% endblock %}
