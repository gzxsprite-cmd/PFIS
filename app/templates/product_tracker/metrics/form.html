<div class="modal">
  <div class="modal-overlay" hx-target="this" hx-swap="outerHTML"></div>
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title">录入指标数据</h3>
      <button class="modal-close" _="on click set #metric-form-modal.innerHTML to ''">×</button>
    </div>
    <form
      class="grid md:grid-cols-2 gap-4 text-sm"
      hx-post="/product_tracker/metrics"
      hx-target="#metric-table"
      hx-swap="outerHTML"
      _="on htmx:afterRequest set #metric-form-modal.innerHTML to ''"
    >
      <div>
        <label class="block text-slate-500 mb-1">产品</label>
        <select name="product_id" class="input" required>
          {% for product in products %}
          <option value="{{ product.id }}" {% if product_id and product.id == product_id %}selected{% endif %}>{{ product.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block text-slate-500 mb-1">指标</label>
        <select name="metric_id" class="input" required>
          {% for metric in metrics %}
          <option value="{{ metric.id }}" {% if metric_id and metric.id == metric_id %}selected{% endif %}>{{ metric.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block text-slate-500 mb-1">记录日期</label>
        <input type="date" name="record_date" class="input" required />
      </div>
      <div>
        <label class="block text-slate-500 mb-1">数值</label>
        <input type="number" step="0.0001" name="value" class="input" required />
      </div>
      <div class="md:col-span-2">
        <label class="block text-slate-500 mb-1">来源</label>
        <input type="text" name="source" class="input" placeholder="可选" />
      </div>
      <div class="md:col-span-2">
        <label class="block text-slate-500 mb-1">备注</label>
        <textarea name="remark" class="input" rows="2"></textarea>
      </div>
      <div class="md:col-span-2 flex justify-end gap-2">
        <button type="button" class="btn-secondary" _="on click set #metric-form-modal.innerHTML to ''">取消</button>
        <button type="submit" class="btn-primary">保存</button>
      </div>
    </form>
  </div>
</div>
